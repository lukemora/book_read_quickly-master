# 第3章：类型、值和变量

书中从第三章开始一直到第十章为止，开始逐步介绍 `js` 的各种概念与 `API`。

涉及到的内容大体路径为：**类型 -> 表达式 -> 语句 -> 对象 / 数组 -> 函数 -> 类 -> 模块**。

这基本涵盖了所有的 `JS` 基础语法。

那么让我们回到本章的内容中，本章主要介绍了以下 3 部分内容：

1. 基本数据类型
2. 原始值与引用类型
4. 类型转换



## 01：基本数据类型：数值、null 、 undefined 和 Symbol

书中把所有的基本数据类型都一一进行了介绍，但是很多都是常用的方法。

我从中找了三块易错的概念：

### 数值

`JS` 中的数值分为两种：

1. 整数
2. 浮点数（小数）

这两种都被叫做数值。

但是需要注意，`JS` 处理数值运算会存在问题，比如：

```js
// 大数字问题
const bigNum = 87627267382917816
console.log(bigNum) // 87627267382917820

// 精度问题
console.log(0.1 + 0.2); // 0.30000000000000004
```

针对 **大数字** 问题，我们可以通过 `BigInt` 进行处理：

```js
// 大数字表示
const bigNum = 87627267382917816n
console.log(bigNum) // 87627267382917816n
```

而针对 **精度丢失** 的问题，也可以通过一些方式进行处理，咱们这里列举了三种：

```js
const f1 = 0.1
const f2 = 0.2

// ① 精度丢失处理方案：转化为整数，再转化为小数
console.log((f1 * 10 + f2 * 10) / 10); // 0.3
// ② 精度丢失处理方案：直接截断
console.log((f1 + f2).toFixed(2)); // 0.30
// ③ 精度丢失处理方案：高精度数学计算。比如 decimal.js
```



### null 和 undefined

`null` 和 `undefined` 一般会被一起说，这两个值在 `js` 中都被表示为 `false`，日常开发区别不大。

但是在实际沟通中（面试），咱们通常会说它们有区别，那就是：`null` 它代表的意义是一个 **空值**。而 `undefined`  则是 **没有值**。



### Symbol

`Symbol` 是 `ES6` 之后，新增的一个数据类型。表示 **唯一的，永不会重复的值**。

咱们可以通过以下代码来简单的了解它的用法：

```js
console.log(Symbol('hello') == Symbol('hello')); // false
```





## 02：原始值与引用类型

在 `js` 中，数据类型大致可以被分为两类：

1. 基本数据类型
2. 复杂数据类型

**图解：**

![image-20230524182553607](%E7%AC%AC3%E7%AB%A0%EF%BC%9A%E7%B1%BB%E5%9E%8B%E3%80%81%E5%80%BC%E5%92%8C%E5%8F%98%E9%87%8F.assets/image-20230524182553607.png)

其中基本数据类型对应 **原始值** ，它的值被保存在 **栈** 中 ，是 **不可修改** 的。当我们为一个基本数据类型重新赋值时，它在内存中会分成两步处理：**销毁旧的内存空间**，**创建新的内存空间**，以完成值的变化。

而复杂数据类型（对象）对应 **引用类型**，它的值被保存在 **堆** 中， 是 **可以修改** 的。但是变量永远只能指向栈，所以它会在 **栈** 中保存 **堆内存地址**。当一个复杂数据类型被重新赋值时，会在 **堆内存中增加数据** 。



## 03：类型转换

任何一种编程语言中都提供了类型转换的能力。

在 `JS` 中的类型转换被分为：

1. 隐式转换
2. 显示转换

### 隐式转换

在 `JS` 中包含了非常多的隐式转换，比如：

```js
// 利用加号（+），进行字符串隐式转换
console.log('a 的值为：' + 1); // 数字 1 转化为字符串
// boolean 隐式转换
console.log(0 == false); // true（不判断类型）
console.log(0 === false); // false（判断类型）
// 数字的隐式转换
console.log('1' - 0); // 1（数值）
console.log('1' - 0 + 1); // 2（数值）
```

但是大量的使用隐式转换可能会让很多的业务逻辑难以理解，所以实际的企业开发中，我们应该 **慎用** 隐式转换。

以上的隐式转换仅推荐两种：**字符串拼接** 和 **全等号**



### 显示转换

不推荐的隐式转换可以使用显式转换代替，比如：

```js
console.log(parseInt('18.1')); // 18  显示转化为整数
console.log(parseFloat('3.1415')); // 3.1415  显示转化为小数
```

除此之外还有很多的显示转换方法，咱们这里就没有办法一一列举了。



## 总结

这一章中，咱们主要明确了：

1. 基本数据类型
2. 原始值与引用类型
3. 类型转换

三个概念，其中：

1. 针对数字问题，虽然我们有办法处理。但是依然需要在日常开发中，尽量避免处理精度运算
2. 而基础和复杂数据的内存分布，是为了帮助大家理解书中的内容，能达到这个目的就可以了



我是 `Sunday`，每天都会为大家讲解 `IT 技术书籍`，帮大家完成从1到n的脱变，关注我，不迷路哦~

